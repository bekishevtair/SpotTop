function initComponents(){const e=$(".js-import"),t=$("#js-path").val();for(let n=0;n<e.length;n++){const o=$(e[n]),i=o.data("import");$.get(`${t}/${i}.html`,{_:$.now()}).done(e=>{let n=$(e);const i=t.split("/");if(i.length>1){let e="";i.forEach(t=>e+=".."===t?"../":""),n=replaceNestedLinks(n,e,"src"),n=replaceNestedLinks(n,e,"href")}o.replaceWith(n)})}}function initDefaultEvents(){formSubmitA(),formSubmitB(),clearInput(),txtPrevent(),numPrevent(),toggleSwitcher(),toggleNav(),scrollToSection()}function replaceNestedLinks(e,t,n){const o=e.find(`[${n}]`);if(o.length>0)for(let e=0;e<o.length;e++){const i=$(o[e]),a=i.attr(n).split("https://").length>1||i.attr(n).split("http://").length>1,s=!1!==i.data("replace");if(!a&&s){const e=t+i.attr(n);i.attr(n,"..//"===e?"../":e)}}return e}function formSubmitA(){$(".js-form-submit-a").on("click tap",function(e){validateFields()?validatePhone()?($(this).attr("disabled","disabled"),$(".form").submit()):(e.preventDefault(),$('input[name="phoneCountryCode"], input[name="phoneNumber"]').addClass("error")):e.preventDefault()})}function formSubmitB(){$(".js-form-submit-b").on("click tap",function(e){e.preventDefault();const t=$(this).parents("form");validateFields()&&(validatePhone()?($(this).attr("disabled","disabled"),sendEmail(()=>t.submit())):(e.preventDefault(),$('input[name="phoneCountryCode"], input[name="phoneNumber"]').addClass("error"))),console.log(validatePhone())})}function initFields(){$(".js-url-link").attr("type","text").val(window.location.href).attr("type","hidden")}function clearInput(){$("form input").on("focus change",function(){$(this).removeClass("error warning")})}function txtPrevent(){$(document).on("keypress",".js-text",function(e){const t=e.key;t>=0&&t<=9&&e.preventDefault()})}function numPrevent(){$(document).on("keypress",".js-numbers",function(e){const t=e.key,n=t>=0&&t<=9,o=($(this).data("allow")||"").split(",").includes(t);n||o||e.preventDefault()})}function sendEmail(e){const t=$('input[name="email"]').val(),n=$('input[name="firstName"]').val(),o=$('input[name="lastName"]').val(),i=$("html").attr("lang"),a=`../public/email/send.php?email=${t}&name=${n}&surname=${o}&language=${i}`;$.ajax({url:a}).done(function(){e()}),console.log(i)}function validateFields(){const e=$("form").find("[required]");let t=!0;const n=[];for(let o=0;o<e.length;o++){const i=$(e[o]),a=i.attr("type"),s=i.val();switch(a){case"email":t=isEmail(s);break;case"checkbox":t=isChecked(i);break;default:t=isLength(s)}n.push(t),t?i.removeClass("error"):i.addClass("error")}return!n.includes(!1)}function isLength(e){return e.length>1}function isEmail(e){const t=new RegExp("[a-zA-Z0-9]+@[a-zA-Z]+.[a-z]{2,3}");return console.log(t.test(e)),t.test(e)}function isChecked(e){return e.is(":checked")}function toggleSwitcher(){$(document).on("click tap",".js-switcher",function(e){e.preventDefault();const t=$("html").attr("lang"),n=$(this).attr("href").replace("/",""),o=window.location.href.split(`/${t}/`),i=`${o[0]}/${n}/${o[1]}`;n!==t&&(window.location.href=i)})}function toggleNav(){$(document).on("click tap",".js-toggle-nav",function(){$(".js-toggle-nav, #nav").toggleClass("active")})}function scrollToSection(){$(document).on("click tap",".js-anchor-link",function(e){e.preventDefault();const t=$(this).attr("href"),n=$(".header").height(),o=$(t).offset().top-n;$(".js-toggle-nav, #nav").removeClass("active"),$("html, body").animate({scrollTop:o},500)})}function getSession(){return $.ajax({url:"https://api.imediafile.com/phoneVerification/?initialization=true",async:!1,type:"GET",complete:e=>e.responseJSON.response}).responseJSON.response}function isPhoneCorrect(e){const t=getSession();return $.ajax({url:`https://api.imediafile.com/phoneVerification/?session=${t}&phoneNumber=${e}`,async:!1,type:"GET",complete:e=>e.responseJSON.is_phone_valid}).responseJSON.is_phone_valid}function validatePhone(){const e=$('input[name="phoneCountryCode"]').val(),t=$('input[name="phoneNumber"]').val();return"true"===isPhoneCorrect(e.replace("+","")+t)}$(()=>{initComponents(),initDefaultEvents(),initFields()});